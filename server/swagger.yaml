openapi: 3.0.0
info:
  title: Facebook Clone API
  description: API documentation for the Facebook Clone backend
  version: 1.0.0
servers:
  - url: http://localhost:5000/api
    description: Local server
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ApiResponse:
      type: object
      properties:
        statusCode:
          type: integer
        data:
          type: object
        message:
          type: string
        success:
          type: boolean
paths:
  /auth/register:
    post:
      summary: Register a new user
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [firstName, lastName, email, password, username]
              properties:
                firstName: { type: string }
                lastName: { type: string }
                email: { type: string }
                password: { type: string }
                username: { type: string }
      responses:
        201:
          description: User registered
  /auth/login:
    post:
      summary: Login user
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email: { type: string }
                password: { type: string }
      responses:
        200:
          description: Login successful
  /auth/me:
    get:
      summary: Get current user
      tags: [Auth]
      security: [{ bearerAuth: [] }]
      responses:
        200:
          description: User data
  /posts:
    post:
      summary: Create a post
      tags: [Posts]
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content: { type: string }
                images: { type: array, items: { type: string } }
                privacy: { type: string, enum: [public, friends, private] }
      responses:
        201:
          description: Post created
  /posts/feed:
    get:
      summary: Get news feed
      tags: [Posts]
      security: [{ bearerAuth: [] }]
      responses:
        200:
          description: Feed retrieved
  /posts/user/{userId}:
    get:
      summary: Get user posts
      tags: [Posts]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: userId
          required: true
          schema: { type: string }
      responses:
        200:
          description: User posts retrieved
  /posts/{id}/like:
    put:
      summary: Like/Unlike a post
      tags: [Posts]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: Like status updated
  /posts/{id}:
    delete:
      summary: Delete a post
      tags: [Posts]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: Post deleted
  /comments/{postId}:
    post:
      summary: Add a comment
      tags: [Comments]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: postId
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [content]
              properties:
                content: { type: string }
      responses:
        201:
          description: Comment added
  /comments/{commentId}:
    delete:
      summary: Delete a comment
      tags: [Comments]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: commentId
          required: true
          schema: { type: string }
      responses:
        200:
          description: Comment deleted
  /users/search:
    get:
      summary: Search users
      tags: [Users]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: query
          name: q
          required: true
          schema: { type: string }
      responses:
        200:
          description: Search results
  /users/{id}:
    get:
      summary: Get user profile
      tags: [Users]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: User profile
    put:
      summary: Update user profile
      tags: [Users]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        200:
          description: Profile updated
  /users/friend-request/{id}:
    post:
      summary: Send friend request
      tags: [Users]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: Request sent
  /users/friend-request/accept/{id}:
    post:
      summary: Accept friend request
      tags: [Users]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: Request accepted
  /users/friend-request/reject/{id}:
    post:
      summary: Reject friend request
      tags: [Users]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: Request rejected
  /chat:
    post:
      summary: Create or access conversation
      tags: [Chat]
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [userId]
              properties:
                userId: { type: string }
      responses:
        200:
          description: Conversation retrieved/created
    get:
      summary: Fetch all conversations
      tags: [Chat]
      security: [{ bearerAuth: [] }]
      responses:
        200:
          description: Conversations list
  /chat/message:
    post:
      summary: Send a message
      tags: [Chat]
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [content, conversationId]
              properties:
                content: { type: string }
                conversationId: { type: string }
      responses:
        200:
          description: Message sent
  /chat/message/{conversationId}:
    get:
      summary: Get messages for conversation
      tags: [Chat]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: conversationId
          required: true
          schema: { type: string }
      responses:
        200:
          description: Messages retrieved
  /verification:
    post:
      summary: Submit verification request
      tags: [Verification]
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                [fullName, dob, country, address, documentType, documentUrl]
              properties:
                fullName: { type: string }
                dob: { type: string, format: date }
                country: { type: string }
                address: { type: string }
                documentType:
                  {
                    type: string,
                    enum: [Passport, National ID Card, Driver's License],
                  }
                documentUrl: { type: string }
      responses:
        201:
          description: Request submitted
    get:
      summary: Get all verification requests
      tags: [Verification]
      security: [{ bearerAuth: [] }]
      responses:
        200:
          description: Requests retrieved
  /verification/{id}/status:
    put:
      summary: Update verification status
      tags: [Verification]
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status: { type: string, enum: [Approved, Denied] }
      responses:
        200:
          description: Status updated
  /analytics/dashboard:
    get:
      summary: Get dashboard stats
      tags: [Analytics]
      security: [{ bearerAuth: [] }]
      responses:
        200:
          description: Stats retrieved
